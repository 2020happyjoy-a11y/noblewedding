<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>운영자 페이지 - Noble Wedding</title>
</head>

<body>
    <h1>운영자 페이지 (Admin)</h1>
    <p>회원이 업로드한 정보를 불러오는 테스트 페이지입니다.</p>

    <div id="memberList"></div>

    <!-- ---------------------------
         Firebase 연결 코드
    ---------------------------- -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
      import { getFirestore } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "AIzaSyAfWFEYCDB9UQ-NktaR-CkjQGXOxPc6IMY",
        authDomain: "noble-wedding.firebaseapp.com",
        projectId: "noble-wedding",
        storageBucket: "noble-wedding.firebasestorage.app",
        messagingSenderId: "242816725640",
        appId: "1:242816725640:web:abc5dcfce08367789a653d"
      };

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      console.log("관리자 페이지: Firebase 연결 성공!");
    </script>


    <!-- ---------------------------
         Firestore 회원 리스트 불러오기
    ---------------------------- -->
    <script type="module">
      import { getDocs, collection } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
      import { getFirestore } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

      const db = getFirestore();

      async function loadMembers() {
        const membersCol = collection(db, "members");
        const memberSnapshot = await getDocs(membersCol);

        let html = "<h2>회원 리스트</h2>";

        memberSnapshot.forEach((doc) => {
          const data = doc.data();
          html += `
            <div style="border:1px solid #ddd; padding:10px; margin:10px 0;">
              <strong>이름:</strong> ${data.name} <br>
              <strong>소개:</strong> ${data.intro}
            </div>
          `;
        });

        document.getElementById("memberList").innerHTML = html;
      }

      loadMembers();
    </script>

</body>
</html>
